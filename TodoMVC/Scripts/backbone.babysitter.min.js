// Backbone.BabySitter
// -------------------
// v0.0.5
//
// Copyright (c)2013 Derick Bailey, Muted Solutions, LLC.
// Distributed under MIT license
//
// http://github.com/babysitterjs/backbone.babysitter

(function(i,e){if("object"==typeof exports){var t=require("underscore"),n=require("backbone");module.exports=e(t,n)}else"function"==typeof define&&define.amd&&define(["underscore","backbone"],e)})(this,function(i,e){"option strict";return e.ChildViewContainer=function(i,e){var t=function(i){this._views={},this._indexByModel={},this._indexByCollection={},this._indexByCustom={},this._updateLength(),this._addInitialViews(i)};e.extend(t.prototype,{add:function(i,e){var t=i.cid;this._views[t]=i,i.model&&(this._indexByModel[i.model.cid]=t),i.collection&&(this._indexByCollection[i.collection.cid]=t),e&&(this._indexByCustom[e]=t),this._updateLength()},findByModel:function(i){var e=this._indexByModel[i.cid];return this.findByCid(e)},findByCollection:function(i){var e=this._indexByCollection[i.cid];return this.findByCid(e)},findByCustom:function(i){var e=this._indexByCustom[i];return this.findByCid(e)},findByIndex:function(i){return e.values(this._views)[i]},findByCid:function(i){return this._views[i]},remove:function(i){var e=i.cid;i.model&&delete this._indexByModel[i.model.cid],i.collection&&delete this._indexByCollection[i.collection.cid];var t;for(var n in this._indexByCustom)if(this._indexByCustom.hasOwnProperty(n)&&this._indexByCustom[n]===e){t=n;break}t&&delete this._indexByCustom[t],delete this._views[e],this._updateLength()},call:function(i,e){e=Array.prototype.slice.call(arguments,1),this.apply(i,e)},apply:function(i,t){t=t||[],e.each(this._views,function(n){e.isFunction(n[i])&&n[i].apply(n,t)})},_updateLength:function(){this.length=e.size(this._views)},_addInitialViews:function(i){if(i){var e,t,n=i.length;for(t=0;n>t;t++)e=i[t],this.add(e)}}});var n=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];return e.each(n,function(i){t.prototype[i]=function(){var t=e.values(this._views),n=[t].concat(e.toArray(arguments));return e[i].apply(e,n)}}),t}(e,i),e.ChildViewContainer});